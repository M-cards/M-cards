import { useState } from "react";

const defaultCards = [
  {
    id: 1,
    name: "–°—É–∫—É–Ω–∞",
    image: "https://upload.wikimedia.org/wikipedia/en/7/76/Sukuna_Jujutsu_Kaisen.png",
    rank: "–ê",
  },
  {
    id: 2,
    name: "–•—É–∞ –ß—ç–Ω",
    image: "https://static.wikia.nocookie.net/heaven-officials-blessing/images/1/1c/Hua_Cheng.png",
    rank: "S",
  },
];

const rankOrder = ["E", "–î", "–°", "G", "–†", "–ê", "S", "–•"];

export default function MCards() {
  const [cards, setCards] = useState(defaultCards);

  // –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
  const addCard = () => {
    const name = prompt("–ò–º—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:");
    const image = prompt("–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:");
    const rank = prompt("–†–∞–Ω–≥ (E, –î, –°, G, –†, –ê, S, –•):").toUpperCase();

    if (name && image && rankOrder.includes(rank)) {
      const newCard = {
        id: Date.now(),
        name,
        image,
        rank,
      };
      setCards([...cards, newCard]);
    } else {
      alert("–ü—Ä–æ–≤–µ—Ä—å –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.");
    }
  };

  // –ü–æ–≤—ã—Å–∏—Ç—å —Ä–∞–Ω–≥ –∫–∞—Ä—Ç–æ—á–∫–∏
  const promoteCard = (id) => {
    setCards((prev) =>
      prev.map((card) => {
        if (card.id === id) {
          const currentIndex = rankOrder.indexOf(card.rank);
          const nextRank =
            currentIndex < rankOrder.length - 1 ? rankOrder[currentIndex + 1] : card.rank;
          return { ...card, rank: nextRank };
        }
        return card;
      })
    );
  };

  return (
    <div style={{ padding: 20, fontFamily: "Arial, sans-serif" }}>
      <h1>üåü –ú –ö–∞—Ä—Ç—ã</h1>
      <button onClick={addCard} style={{ marginBottom: 20, padding: "10px 15px", fontSize: 16 }}>
        –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
      </button>

      <div
        style={{
          display: "grid",
          gridTemplateColumns: "repeat(auto-fill,minmax(200px,1fr))",
          gap: 20,
        }}
      >
        {cards.map((card) => (
          <div
            key={card.id}
            style={{
              border: "2px solid #444",
              borderRadius: 12,
              padding: 10,
              textAlign: "center",
              boxShadow: "2px 2px 10px rgba(0,0,0,0.1)",
            }}
          >
            <img
              src={card.image}
              alt={card.name}
              style={{ width: "100%", height: 150, objectFit: "cover", borderRadius: 8 }}
            />
            <h3 style={{ margin: "10px 0 5px" }}>{card.name}</h3>
            <p>–†–∞–Ω–≥: <b>{card.rank}</b></p>
            <button
              onClick={() => promoteCard(card.id)}
              style={{ padding: "6px 12px", cursor: "pointer" }}
            >
              –ü–æ–≤—ã—Å–∏—Ç—å —Ä–∞–Ω–≥ ‚¨Ü
            </button>
          </div>
        ))}
      </div>
    </div>
  );
}
